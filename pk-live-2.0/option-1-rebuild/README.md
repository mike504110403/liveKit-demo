# 選項 1: 外包接回來後重構

> **版本**: v1.0  
> **制定日期**: 2026-01-13  
> **時程**: 5-6 個月（MVP），10-12 個月（完整版）

---

##  選項概述

### 前提條件
-  外包代碼能夠取得
-  代碼質量可接受（至少可理解）

### 核心策略
取得外包代碼後，進行全面重構：

```
階段 1: 代碼分析（Week 1-2）
   ↓
階段 2: 重構設計（Week 3-4）
   ↓
階段 3: 微服務開發（Week 5-22）
   ↓
階段 4: 測試上線（Week 23-26）
```

### 優點
-  可參考現有業務邏輯（減少需求理解時間）
-  可逐步遷移（風險可控）
-  時程相對較短（5-6 個月 MVP）
-  可識別關鍵功能（基於現有代碼）

### 缺點
-  需要理解舊代碼結構
-  重構工作量可能較大
-  可能繼承部分技術債務

---

## 📁 文檔結構

```
option-1-rebuild/
├── README.md                    # 本文件
├── PROPOSAL.md                  # 企劃書（待完成）
├── PRESENTATION.md              # 簡報文檔（待完成）
└── docs/
    ├── cost/                   # 成本分析
    │   ├── 01-human-resources-cost.md  # 人力成本
    │   ├── 02-infrastructure-cost.md   # 基礎設施成本
    │   └── 03-total-cost.md            # 總成本分析
    ├── human-resources/        # 人力配置
    │   ├── 01-team-structure.md        # 團隊結構
    │   ├── 02-recruitment-plan.md      # 招聘計劃
    │   └── 03-skill-matrix.md          # 技能矩陣
    └── schedule/               # 排程規劃
        ├── 01-phases.md                # 開發階段
        ├── 02-milestones.md            # 里程碑
        └── 03-gantt-chart.md           # 甘特圖
```

---

##  關鍵工作項

### Week 1-2: 代碼分析階段 
- [ ] 資深 PHP 工程師到位
- [ ] PHP 代碼深度審查
- [ ] 性能瓶頸分析
- [ ] 業務邏輯梳理
- [ ] 數據庫結構分析
- [ ] 產出分析報告

**產出**: 代碼分析報告（決定後續架構設計）

### Week 3-4: 重構設計階段 
- [ ] **基於分析報告**制定微服務拆分方案
- [ ] 目標架構設計
- [ ] API 規格定義
- [ ] 數據庫 Schema 設計
- [ ] 遷移計劃制定

**產出**: 架構設計文檔、API 文檔（此階段才能確定）

### Week 5-22: 開發階段 
- [ ] 微服務開發（並行，數量視分析結果而定）
- [ ] 遊戲服務開發（獨立主理）
- [ ] 原生 iOS/Android 開發（並行）
- [ ] 持續整合測試

**說明**: 具體服務數量和內容取決於 Week 1-4 的分析結果

### Week 23-26: 測試上線階段 
- [ ] 數據遷移
- [ ] QA 測試
- [ ] 灰度發布
- [ ] 正式上線

---

##  預估時程

### MVP（不含招聘：6 個月 / 含招聘：7.5 個月）

**不含招聘**:
- Phase 1: 需求分析（2 週）
- Phase 2: 架構設計（2 週）
- Phase 3: 開發整合（18 週）
- Phase 4: 測試上線（4 週）
- **總計**: 26 週（**6 個月**）

**含招聘時間**:
- Phase 0: 招聘與準備（4 週）
  - PM 並行進行需求整理
  - 關鍵人員招聘（PHP、Tech Lead）
- Phase 1-4: 同上（26 週）
- **總計**: 30 週（**7.5 個月 MVP**） ⚡

### 完整版（不含招聘：10-12 個月 / 含招聘：11.5-13 個月）
- 招聘與準備: 1 個月
- MVP: 6 個月
- 功能完善: 4 個月
- 優化上線: 2 個月
- **總計**: **11.5-13 個月** 

---

##  預估成本

### 6 個月（MVP）
- 人力成本: $390K-780K（20-26 人 × 6 個月）
- 基礎設施: $10K-20K
- 第三方服務: $30K-70K
- **總計**: **$430K-870K**

### 1 年（完整版）
- 人力成本: $780K-1.56M（20-26 人 × 12 個月）
- 基礎設施: $20K-40K
- 第三方服務: $60K-140K
- **總計**: **$860K-1.74M**

---

##  人力需求

### 總人數: 20-26 人

- **PHP 分析團隊**: 1-2 人（前期關鍵）
- **Go 後端團隊**: 7 人（6 個微服務 + 1 個遊戲中介層）
- **遊戲服務團隊**: 5-6 人
  - Tech Lead: 1 人
  - 後端工程師（Go/Java/C#）: 2-3 人
  - Unity 前端工程師: 2 人
- **原生客戶端團隊**: 3-4 人
  - iOS Team Lead + 工程師: 1-2 人
  - Android Team Lead + 工程師: 1-2 人
  - （保險起見多配置 1-2 人）
- **基礎設施團隊**: 3-5 人（DevOps + QA）
- **設計團隊**: 1-2 人（UI/UX，可外包）

---

##  重要說明

**架構部分需等待 Week 1-2 代碼分析完成後才能確定**

在拿到外包代碼並完成分析前：
-  無法確定現有架構細節
-  無法確定目標架構設計
-  無法確定微服務拆分方案
-  無法確定遷移計劃

**Week 1-4 的分析設計階段至關重要**，決定了後續所有技術決策。

##  下一步

1.  成本分析文檔（已完成）
2.  人力配置文檔（已完成）
3.  排程規劃文檔（已完成）
4. ⏳ 等待代碼分析完成後補充架構文檔
5. ⏳ 產出企劃書（PROPOSAL.md）
6. ⏳ 產出簡報文檔（PRESENTATION.md）

---

**版本**: v1.0  
**更新日期**: 2026-01-13
