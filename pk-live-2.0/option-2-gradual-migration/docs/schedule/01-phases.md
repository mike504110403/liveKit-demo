# 選項2：逐步替換 - 開發階段規劃

> **版本**: v1.0  
> **更新日期**: 2026-01-13  
> **適合轉換**: Google Sheets

---

##  開發階段總覽

### 8 個月總時程（含招聘）

| 階段 | 時間 | 週數 | 人數 | 狀態 |
|------|------|------|------|------|
| **Phase 0: 招聘準備** | Week -4 to 0 | 4 週 | PM 1 人 |  待開始 |
| **Phase 1: 瓶頸分析** | Week 1-2 | 2 週 | 4-5 人 |  待開始 |
| **Phase 2: 優先級排序** | Week 2-3 | 1 週 | 8-10 人 |  待開始 |
| **Phase 3: 模組替換** | Week 4-28 | 25 週 | 22-28 人 |  待開始 |
| **Phase 4: 測試上線** | Week 29-32 | 4 週 | 22-28 人 |  待開始 |
| **總計** | **Week -4 to 32** | **36 週** | **22-28 人** | |

---

##  Phase 0: 招聘與準備（Week -4 to 0）

### 招聘活動（同選項1）

| 週次 | 活動 | 負責人 | 產出 |
|------|------|--------|------|
| Week -4 | 發布 JD，啟動獵頭（**PHP 優先**） | HR + PM | JD 文件 |
| Week -3 | 簡歷篩選，初試 | Tech Lead | 候選人名單 |
| Week -2 | 複試，評估 | PM + Tech Lead | Offer 候選人 |
| Week -1 | 發送 Offer，確認入職 | HR | Offer Letter |

### PM 並行工作

| 週次 | 活動 | 產出 |
|------|------|------|
| Week -4 to -2 | 整理 1.0 功能清單，收集用戶反饋 | 功能清單 v1.0 |
| Week -2 to 0 | 初步需求文檔，外包代碼初步分析 | 需求文檔草稿 |

---

##  Phase 1: 瓶頸分析（Week 1-2）

### 團隊組成

| 角色 | 人數 | 職責 |
|------|------|------|
| 專案經理 | 1 | 整體協調 |
| 資深 PHP 工程師 | 1-2 | **瓶頸分析**（關鍵）|
| 後端 Tech Lead | 1 | 架構評估 |
| DevOps Lead | 1 | 基礎設施評估 |

### 工作內容（最關鍵階段）

| 工作項 | 負責人 | 時間 | 產出 |
|--------|--------|------|------|
| **慢查詢分析**  | PHP 工程師 | Week 1 | Top 20 慢查詢列表 |
| **高 CPU 模組識別**  | PHP 工程師 | Week 1 | 高 CPU 模組列表 |
| **高內存模組識別**  | PHP 工程師 | Week 1 | 高內存模組列表 |
| **模組依賴關係分析**  | PHP 工程師 | Week 1-2 | 依賴關係圖 |
| **業務邏輯梳理** | PHP 工程師 + PM | Week 2 | 業務邏輯文檔 |
| **瓶頸分析報告**  | PHP 工程師 | Week 2 | 完整分析報告 |

**產出**: **瓶頸分析報告**（決定替換順序）

---

##  Phase 2: 優先級排序（Week 2-3）

### 團隊組成

| 角色 | 人數 | 職責 |
|------|------|------|
| 專案經理 | 1 | 決策協調 |
| 後端 Tech Lead | 1 | 技術評估 |
| 資深 PHP 工程師 | 1-2 | 替換難度評估 |
| DevOps Lead | 1 | 運維風險評估 |
| 產品經理 | 0-1 | 業務影響評估 |

### 工作內容

| 工作項 | 負責人 | 時間 | 產出 |
|--------|--------|------|------|
| **模組優先級排序**  | PM + Tech Lead | Week 2-3 | 優先級清單 |
| 新舊系統並行架構設計 | Tech Lead | Week 3 | 並行架構圖 |
| 流量切換方案設計 | DevOps Lead | Week 3 | 流量切換文檔 |
| 數據同步方案設計 | Tech Lead + DevOps | Week 3 | 數據同步方案 |

**產出**: **模組替換優先級清單**（基於瓶頸分析）

---

##  Phase 3: 模組替換（Week 4-28）

### 替換策略（示例）

| 批次 | 時間 | 替換模組（示例） | 原因 |
|------|------|----------------|------|
| **Batch 1** | Week 4-10 | 高 CPU 模組 | 最影響性能 |
| **Batch 2** | Week 11-17 | 慢查詢模組 | 數據庫瓶頸 |
| **Batch 3** | Week 18-24 | 核心業務模組 | 業務關鍵 |
| **Batch 4** | Week 25-28 | 剩餘模組 | 完成替換 |

**說明**: 具體模組和順序取決於 Week 1-2 的瓶頸分析結果

### 並行開發

| 團隊 | 週次 | 開發內容 |
|------|------|---------|
| **PHP 維護團隊** | Week 4-28 | 維護舊系統，Bug 修復 |
| **Go 後端團隊** | Week 4-28 | 逐步替換模組 |
| **遊戲團隊** | Week 8-14 | 遊戲中介層 + 遊戲服務 |
| **客戶端團隊** | Week 4-28 | 逐步適配新 API |
| **DevOps 團隊** | Week 4-28 | 雙系統運維 + 流量切換 |

### 每個模組替換流程

| 步驟 | 時間 | 負責人 | 說明 |
|------|------|--------|------|
| 1. 設計 | 1-2 週 | Go 工程師 | API 設計、數據庫設計 |
| 2. 開發 | 2-4 週 | Go 工程師 | 微服務開發 |
| 3. 測試 | 1 週 | QA | 功能測試、回歸測試 |
| 4. 灰度 | 1 週 | DevOps | 10% → 50% → 100% |
| 5. 驗證 | 1 週 | QA + DevOps | 監控數據、用戶反饋 |

---

##  Phase 4: 測試上線（Week 29-32）

### 團隊組成

| 角色 | 人數 | 職責 |
|------|------|------|
| 全體工程師 | 22-28 | Bug 修復 |
| QA 團隊 | 2-3 | 全量回歸測試 |
| DevOps 團隊 | 4-6 | PHP 下線、Go 全量 |

### 工作內容

| 工作項 | 負責人 | 時間 | 產出 |
|--------|--------|------|------|
| **關閉 PHP 系統**  | DevOps | Week 29 | PHP 下線 |
| 全量切換至 Go | DevOps | Week 29 | 100% Go |
| 全量回歸測試 | QA | Week 30-31 | 測試報告 |
| 性能優化 | 後端 + DevOps | Week 31-32 | 性能報告 |
| 監控觀察 | DevOps | Week 32 | 監控報告 |

---

##  關鍵里程碑

| 里程碑 | 時間 | 驗收標準 |
|--------|------|---------|
| **M1: 瓶頸分析完成**  | Week 2 | 瓶頸分析報告、優先級清單 |
| **M2: 優先級排序完成** | Week 3 | 模組替換計劃、並行架構設計 |
| **M3: Batch 1 完成** | Week 10 | 第一批模組替換完成 |
| **M4: Batch 2 完成** | Week 17 | 第二批模組替換完成 |
| **M5: 所有模組完成** | Week 28 | 所有模組替換完成 |
| **M6: PHP 下線**  | Week 29 | PHP 系統完全下線 |
| **M7: MVP 上線** | Week 32 | Go 系統 100% 運行 |

---

##  選項2 特有風險

| 風險項 | 可能性 | 影響 | 應對措施 |
|--------|-------|------|---------|
| 瓶頸分析不足 |  中 |  高 | 充足時間（2 週）|
| 模組依賴複雜 |  中 |  高 | 詳細依賴分析 |
| 流量切換失敗 |  中 |  高 | 充分測試、快速回滾 |
| PHP 系統崩潰 |  低 |  高 | 維護團隊待命 |
| 雙系統數據不一致 |  中 |  高 | 雙寫 + 定期對賬 |

---

**版本**: v1.0  
**更新日期**: 2026-01-13
